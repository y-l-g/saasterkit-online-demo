---
title: DTO-Centric Data Flow
description: The core architectural pattern for data transfer.
navigation:
  icon: i-lucide-git-merge
---

Eloquent models are never passed directly to the frontend. We use Data Transfer Objects (DTOs) from `spatie/laravel-data` as a well-defined contract between the backend and frontend.

The `spatie/typescript-transformer` package generates TypeScript interfaces from your PHP DTOs, ensuring end-to-end type safety.

### Example: Lazy-Loading with DTOs

DTOs can conditionally include relationships using the `Lazy` type, which prevents unnecessary data from being loaded.

```php [app/Data/Auth/UserData.php]
#[TypeScript]
class UserData extends Data
{
    public function __construct(
        public readonly int $id,
        public readonly string $name,
        public readonly string $email,
        /** @var Lazy|Collection<int, TeamData> */
        public readonly Lazy|Collection $teams,
    ) {}

    public static function fromModel(User $user): self
    {
        return new self(
            id: $user->id,
            name: $user->name,
            email: $user->email,
            teams: Lazy::whenLoaded('teams', $user, fn() => TeamData::collect($user->teams)),
        );
    }
}
```

This ensures the `teams` relationship is only included if explicitly loaded on the model (e.g., `$user->load('teams')`).
